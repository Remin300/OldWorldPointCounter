<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Licznik Punktów</title>
    <!-- Importowanie Bootstrap przez CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css">
    <style>
        body {
            background-image: url('Jpg/Background2.jpg'); /* Ścieżka do obrazka */
            background-size: cover; /* Aby obrazek wypełniał całe tło */
            background-repeat: no-repeat; /* Aby obrazek się nie powtarzał */
            background-position: center; /* Wyśrodkowanie obrazka */
            background-attachment: fixed; /* Ustawienie tła jako statyczne */
            min-height: 100vh; /* Umożliwia pokrycie całej wysokości widoku */
        }
    </style>

    <body>
        <div class="container mt-5">
            <h1 class="text-center mb-4">Warhammer Old World - points counter</h1>
            <hr class="mt-2" />
            <h2 class="text-center mt-2" id="scenarioDisplay"></h2>
            <div class="text-center">
                <button type="button" id="modalButton" class="btn btn-link" data-bs-toggle="modal" data-bs-target="">
                    <i class="bi bi-eye-fill" style="font-size: 2rem; color: black;"></i>
                </button>
            </div>
            <hr class="mt-2" />
            <form id="ScoreForm" class="col-md-4 p-4 mt-5 bg-white mx-auto rounded shadow border border-2 border-secondary">
                <h4 class="text-center mb-4">Score</h4>
                <div class="col-md-12 mx-auto mb-2">
                    <select id="countingType" class="form-control" required onchange="updatePoints()">
                        <option value="Official">Official counter (TOW manual)</option>
                        <option value="Tournament">Tournament counter</option>
                    </select>
                </div>
                <div class="col-md-12 mx-auto mb-2 d-none" id="BattlePointsDiv">
                    <label class="form-label" for="BattlePoints">How many points are you playing for?</label>
                    <input type="number" id="BattlePoints" class="form-control" required oninput="updatePoints()" value="1500">
                </div>
                <div class="row mt-4 mx-auto ">
                    <div class="col-6 mx-auto">
                        <div class="d-flex align-items-center">
                            <label for="player1Points" id="ptsNamePlayer1" class="form-label me-2"></label>
                            <div class="form-control-plaintext" id="player1Points">0</div>
                        </div>
                    </div>
                    <div class="col-6 mx-auto">
                        <div class="d-flex align-items-center">
                            <label for="player2Points" id="ptsNamePlayer2" class="form-label me-2"></label>
                            <div class="form-control-plaintext " id="player2Points">0</div>
                        </div>
                    </div>
                </div>
                <h6 class="text-center mt-4">Battle result:</h6>
                <div class="text-center mt-4 form-control-plaintext" id="battleResult">Draw</div>
            </form>
            <hr class="mt-2" />

            <div class="row mb-4">
                <!-- Nowy wiersz dla form -->
                <form id="player1Form" class="col-md-6 p-4 mt-5 bg-white  rounded shadow border border-2 border-secondary">

                    <div class="d-flex justify-content-center align-items-center mb-4">
                        <h3 id="player1Display" class="text-center"></h3>
                    </div>
                    <div class="d-flex align-items-center mb-2 d-none" id="SpcFtrPlayer1">
                        <label class="form-label me-2" for="SpecialFeaturePlayer1">Controls the special feature</label>
                        <input type="checkbox" id="SpecialFeaturePlayer1" onchange="updatePoints()">
                    </div>

                    <div class="d-flex align-items-center mb-2">
                        <label class="form-label me-2" for="GeneralSlainPlayer1">Enemy General (slain, has fled or fleeing)</label>
                        <input type="checkbox" id="GeneralSlainPlayer1" onchange="updatePoints()">
                    </div>

                    <div class="d-flex align-items-center mb-2">
                        <label class="form-label me-2" for="BsbPlayer1">Enemy Battle Standard Bearer (slain, has fled or fleeing)</label>
                        <input type="checkbox" id="BsbPlayer1" onchange="updatePoints()">
                    </div>

                    <div class="d-flex align-items-center mb-2">
                        <label class="form-label me-2" for="StandardsPlayer1">Number of enemy standard claimed as a trophy</label>
                        <input type="number" id="StandardsPlayer1" class="form-control w-25" required oninput="updatePoints()">
                    </div>

                    <hr class="mt-2" />

                    <div class="d-flex justify-content-center align-items-center mb-4">
                        <label class="form-label me-2">Enemy Units (Destroyed/Fleeing/25% Str) </label>
                    </div>

                    <div id="player1Units" class="mt-3"></div>
                    <div class="d-flex justify-content-center align-items-center">
                        <button type="button" class="btn btn-link" onclick="addUnit('player1')">
                            <i class="bi bi-plus-square-fill" style="font-size: 2rem; color: black;"></i>
                        </button>
                    </div>
                </form>


                <form id="player2Form" class="col-md-6 p-4 mt-5 bg-white rounded shadow border border-2 border-secondary">

                    <div class="d-flex justify-content-center align-items-center mb-4">
                        <h3 id="player2Display" class="text-center"></h3>
                    </div>
                    <div class="d-flex align-items-center mb-2 d-none" id="SpcFtrPlayer2">
                        <label class="form-label me-2" for="SpecialFeaturePlayer2">Controls the special feature</label>
                        <input type="checkbox" id="SpecialFeaturePlayer2" onchange="updatePoints()">
                    </div>

                    <div class="d-flex align-items-center mb-2">
                        <label class="form-label me-2" for="GeneralSlainPlayer2">Enemy General (slain, has fled or fleeing)</label>
                        <input type="checkbox" id="GeneralSlainPlayer2" onchange="updatePoints()">
                    </div>

                    <div class="d-flex align-items-center mb-2">
                        <label class="form-label me-2" for="BsbPlayer2">Enemy Battle Standard Bearer (slain, has fled or fleeing)</label>
                        <input type="checkbox" id="BsbPlayer2" onchange="updatePoints()">
                    </div>

                    <div class="d-flex align-items-center mb-2">
                        <label class="form-label me-2" for="StandardsPlayer2">Number of enemy standard claimed as a trophy</label>
                        <input type="number" id="StandardsPlayer2" class="form-control w-25" required oninput="updatePoints()">
                    </div>

                    <hr class="mt-2" />


                    <div class="d-flex justify-content-center align-items-center mb-4">
                        <label class="form-label me-2">Enemy Units (Destroyed/Fleeing/25% Str) </label>
                    </div>

                    <div id="player2Units" class="mt-3  "></div>
                    <div class="d-flex justify-content-center align-items-center">
                        <button type="button" class="btn btn-link" onclick="addUnit('player2')">
                            <i class="bi bi-plus-square-fill" style="font-size: 2rem; color: black;"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>


        <!-- Modal dla The Plains of L’anguille -->
        <div class="modal fade" id="Scenario1Modal" tabindex="-1" aria-labelledby="scenario1ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="scenario1ModalLabel">The Plains of L’anguille</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">

                        <img id="scenarioImage" src="Jpg/Scenario1.png" alt="Scenariusz" class="img-fluid mt-3" style="display:block ;">

                        <h6 class="mt-3">Set-up</h6>
                        <p>
                            Place terrain as described in The Old World Rulebook (page 268).
                        </p>

                        <h6>Deployment</h6>
                        <p>
                            Once the battlefield has been set up, the winner of a roll-off
                            chooses which player will deploy the first unit. The winner
                            of this roll-off must also choose their deployment zone (A or
                            B), as shown on the map opposite. Players deploy their armies
                            using the alternating units method, as described on page 285.
                        </p>

                        <h6>First Turn</h6>
                        <p>
                            Once deployment is complete, the winner of a roll-off takes
                            the first turn. The player that finished deploying their army
                            first adds +1 to their roll.
                        </p>
                        <h6>Game Length</h6>
                        <p>
                            Before the game begins, players can choose to play a ‘fixed’
                            length game or a ‘random’ length game: Fixed Game Length: The battle will last for six rounds, until
                            one side concedes, or until the time limit agreed by the players
                            is reached, as described on page 286.
                            Random Game Length: The battle will last a random number
                            of rounds or until one side concedes. Starting at the end of the
                            fifth round, roll a D6 at the end of each round. Add the round
                            number to the dice roll. If the total is 10 or more, the battle
                            ends immediately. If the total is less than 10 then the battle
                            continues for at least one more round.
                        </p>
                        <h6>Scenario Special Rules</h6>
                        <p>
                            This scenario has no special rules.
                        </p>
                        <h6>Victory!</h6>
                        <p>
                            Once the battle has ended, use Victory Points to determine
                            which player is the winner.
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal dla THE DOOM OF ODO TODMEYER III -->
        <div class="modal fade" id="Scenario2Modal" tabindex="-1" aria-labelledby="scenario1ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="scenario1ModalLabel">The doom of Odo Todmeyer III</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">


                        <img id="scenarioImage" src="Jpg/Scenario2.png" alt="Scenariusz" class="img-fluid mt-3" style="display:block ;">

                        <h6 class="mt-3">Set-up</h6>
                        <p>
                            Place terrain as described in The Old World Rulebook (page 268).
                        </p>

                        <h6>Deployment</h6>
                        <p>
                            Once the battlefield has been set up, the winner of a roll-off
                            chooses which player will deploy the first unit. The winner
                            of this roll-off must also choose their deployment zone (A or
                            B), as shown on the map opposite. Players deploy their armies
                            using the alternating units method, as described on page 285.
                        </p>

                        <h6>First Turn</h6>
                        <p>
                            Once deployment is complete, the winner of a roll-off takes
                            the first turn. The player that finished deploying their army
                            first adds +1 to their roll.
                        </p>
                        <h6>Game Length</h6>
                        <p>
                            There is no turn limit for this scenario. Instead, the battle
                            will last until one side reaches its ‘break point’ or until one
                            side concedes.
                        </p>
                        <h6>Scenario Special Rules</h6>
                        <p>
                            Break Point: All armies have a breaking point. This is equal to
                            a quarter (25%) of the total Unit Strength of the army at the
                            start of the game. To calculate the break point of your army,
                            simply add together the Unit Strength of every unit (including
                            characters) in your muster list and divide the total by four,
                            rounding fractions down.
                            With each model removed from play as a casualty and with
                            each unit destroyed, an army approaches its break point.
                            If, during any Start of Turn sub-phase, the remaining Unit
                            Strength of either army has fallen below its break point, that
                            army is considered to have ‘broken’. At this point, the game
                            ends as models begin to flee, crumble into dust, dematerialise,
                            and so forth.
                            (Note that units that have pursued a fleeing enemy off the
                            battlefield and units held in reserve count as being on the battlefield
                            for the purposes of determining whether or not an army has reached
                            its break point).
                        </p>
                        <h6>Victory!</h6>
                        <p>
                            If the game ends with one army having broken, the unbroken
                            army achieves a crushing victory. Should both armies fall
                            below their break point at the same time, use Victory Points
                            to determine which player is the winner, as described on
                            page 286.
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal dla The battle of Pine Crags -->
        <div class="modal fade" id="Scenario3Modal" tabindex="-1" aria-labelledby="scenario1ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="scenario1ModalLabel">The battle of Pine Crags</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">


                        <img id="scenarioImage" src="Jpg/Scenario3.png" alt="Scenariusz" class="img-fluid mt-3" style="display:block ;">

                        <h6 class="mt-3">Set-up</h6>
                        <p>
                            Place terrain as described in The Old World Rulebook (page 268).
                        </p>

                        <h6>Deployment</h6>
                        <p>
                            Once the battlefield has been set up, the winner of a roll-off
                            chooses which player will deploy the first unit. The winner
                            of this roll-off must also choose their deployment zone (A or
                            B), as shown on the map opposite. Prior to deployment, both
                            players secretly divide their armies into two forces – the main
                            force and the flanking force:
                            • A flanking force must contain at least one non-character
                            unit and can be worth up to 33% of the total points value
                            of the army (for example, in a 2,000 points game, your
                            flanking force may be worth up to 666 points).
                            • A flanking force may include characters, but cannot
                            include the General.
                            Once flanking forces have been selected, each player secretly
                            makes a note of which flank (left or right) theirs will be
                            deployed upon. Then, starting with the player that won the
                            roll-off, the players deploy their main forces within their
                            central deployment zone, using the alternating units method,
                            as described on page 285.
                            Finally, after both players have finished deploying their main
                            forces, the players reveal where their flanking forces are to be
                            deployed. Starting with the player that won the roll-off, the
                            players deploy their flanking forces within their chosen 18"
                            flank zone, using the alternating units method.
                        </p>

                        <h6>First Turn</h6>
                        <p>
                            Once deployment is complete, the winner of a roll-off takes
                            the first turn.
                        </p>
                        <h6>Game Length</h6>
                        <p>
                            The battle will last for six rounds, until one side concedes,
                            or until the time limit agreed by the players is reached, as
                            described on page 286.
                        </p>
                        <h6>Scenario Special Rules</h6>
                        <p>
                            Other than the special deployment rules already given, this
                            scenario has no special rules.
                        </p>
                        <h6>Victory!</h6>
                        <p>
                            Once the battle has ended, use Victory Points to determine
                            which player is the winner.
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal dla THE DRAKWALD FOREST INCIDENT -->
        <div class="modal fade" id="Scenario4Modal" tabindex="-1" aria-labelledby="scenario1ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="scenario1ModalLabel">The Drakwald Forest Incident</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">


                        <img id="scenarioImage" src="Jpg/Scenario4.png" alt="Scenariusz" class="img-fluid mt-3" style="display:block ;">

                        <h6 class="mt-3">Set-up</h6>
                        <p>
                            Place terrain as described in The Old World Rulebook (page 268).
                        </p>

                        <h6>Deployment</h6>
                        <p>
                            Once the battlefield has been set up, the winner of a roll-off
                            chooses which player will deploy the first unit. The winner of
                            this roll-off must also choose their deployment zone (A or B),
                            as shown on the map opposite.
                            Before deploying their army, each player rolls a D6 for each
                            unit, including each character and war machine, in their army.
                            On a roll of 1, the unit must be held back as reserves (see
                            below). Once a roll has been made for each unit, those that
                            are not held in reserve can be deployed. Players deploy their
                            armies using the alternating units method, as described on
                            page 285.
                        </p>

                        <h6>First Turn</h6>
                        <p>
                            Once deployment is complete, the winner of a roll-off takes
                            the first turn. The player that finished deploying their army
                            first adds +1 to their roll.
                        </p>
                        <h6>Game Length</h6>
                        <p>
                            The battle will last for six rounds, until one side concedes,
                            or until the time limit agreed by the players is reached, as
                            described on page 286.
                        </p>
                        <h6>Scenario Special Rules</h6>
                        <p>
                            Reserves: Reserves are not deployed at the start of the
                            battle. Instead they can enter play during the Compulsory
                            Moves sub-phase of any turn – other than the first – of their
                            controlling player’s choosing. When they arrive, reserves may
                            enter the battlefield from any point on the long battlefield edge
                            within their deployment zone, and move on using the rules for
                            reinforcements (as described on page 134).
                        </p>
                        <h6>Victory!</h6>
                        <p>
                            Once the battle has ended, use Victory Points to determine
                            which player is the winner.
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal dla  THE BATTLE OF GISOREUX GAP-->
        <div class="modal fade" id="Scenario5Modal" tabindex="-1" aria-labelledby="scenario5ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="scenario1ModalLabel">The Battle Of Gisoreux Gap</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">


                        <img id="scenarioImage" src="Jpg/Scenario5.png" alt="Scenariusz" class="img-fluid mt-3" style="display:block ;">

                        <h6 class="mt-3">Set-up</h6>
                        <p>
                            Place terrain as described in The Old World Rulebook (page 268).
                        </p>

                        <h6>Deployment</h6>
                        <p>
                            Once the battlefield has been set up, the winner of a roll-off
                            chooses which player will deploy the first unit. The winner
                            of this roll-off must also choose their deployment zone (A or
                            B), as shown on the map opposite. Players deploy their armies
                            using the alternating units method, as described on page 285.
                        </p>

                        <h6>First Turn</h6>
                        <p>
                            Once deployment is complete, the winner of a roll-off takes
                            the first turn. The player that finished deploying their army
                            first adds +1 to their roll.
                        </p>
                        <h6>Game Length</h6>
                        <p>
                            The battle will last a random number of rounds or until one
                            side concedes. Starting at the end of the fifth round, roll a D6
                            at the end of each round. Add the round number to the dice
                            roll. If the total is 10 or more, the battle ends immediately. If
                            the total is less than 10 then the battle continues for at least
                            one more round.
                        </p>
                        <h6>Scenario Special Rules</h6>
                        <p>
                            Bottleneck: The battle is fought in a narrow mountain pass
                            enclosed by high cliffs. Because of this, the long battlefield
                            edges count as impassable terrain. As such, no units (including
                            fleeing units or any arriving from reserve) can leave or enter
                            the battlefield via either long edge unless they have the
                            Ethereal or Fly special rule.
                        </p>
                        <h6>Victory!</h6>
                        <p>
                            Once the battle has ended, use Victory Points to determine
                            which player is the winner.
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal dla  THE LONELY TOWER -->
        <div class="modal fade" id="Scenario6Modal" tabindex="-1" aria-labelledby="scenario1ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="scenario1ModalLabel">The Lonely Tower</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">


                        <img id="scenarioImage" src="Jpg/Scenario6.png" alt="Scenariusz" class="img-fluid mt-3" style="display:block ;">

                        <h6 class="mt-3">Set-up</h6>
                        <p>
                            Place terrain as described on page 268. In addition, place a
                            single special feature (as described on page 272) in the centre
                            of the battlefield (players should agree which special feature to
                            use from the terrain available).
                        </p>

                        <h6>Deployment</h6>
                        <p>
                            Once the battlefield has been set up, the winner of a roll-off
                            chooses which player will deploy the first unit. The winner
                            of this roll-off must also choose their deployment zone (A or
                            B), as shown on the map opposite. Players deploy their armies
                            using the alternating units method, as described on page 285.
                        </p>

                        <h6>First Turn</h6>
                        <p>
                            Once deployment is complete, the winner of a roll-off takes
                            the first turn. The player that finished deploying their army
                            first adds +1 to their roll.
                        </p>
                        <h6>Game Length</h6>
                        <p>
                            Before the game begins, players can choose to play a ‘fixed’
                            length game or a ‘random’ length game: Fixed Game Length: The battle will last for six rounds, until
                            one side concedes, or until the time limit agreed by the players
                            is reached, as described on page 286.
                            Random Game Length: The battle will last a random number
                            of rounds or until one side concedes. Starting at the end of the
                            fifth round, roll a D6 at the end of each round. Add the round
                            number to the dice roll. If the total is 10 or more, the battle
                            ends immediately. If the total is less than 10 then the battle
                            continues for at least one more round.
                        </p>
                        <h6>Scenario Special Rules</h6>
                        <p>
                            This scenario has no special rules.
                        </p>
                        <h6>Victory!</h6>
                        <p>
                            Once the battle has ended, use Victory Points to determine
                            which player is the winner, as described on page 286. The
                            player that controls the special feature at the end of the battle
                            wins a bonus of 200 Victory Points (in addition to any bonus
                            controlling the special feature may normally give).
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>



        <!-- Skrypt do dodawania jednostek -->
        <script>
            window.onload = function () {
                // Pobieranie danych z Local Storage
                window.player1Name = localStorage.getItem("player1");
                window.player2Name = localStorage.getItem("player2");
                const scenario = localStorage.getItem("scenario");
                let scenarioTitle;
                if (scenario === "Scenario1") {
                    scenarioTitle = "The Plains of L’anguille"
                }
                else if (scenario === "Scenario2") {
                    scenarioTitle = "The doom of Odo Todmeyer III"
                }
                else if (scenario === "Scenario3") {
                    scenarioTitle = "The battle of Pine Crags"
                }
                else if (scenario === "Scenario4") {
                    scenarioTitle = "The Drakwald Forest Incident"
                }
                else if (scenario === "Scenario5") {
                    scenarioTitle = "The Battle Of Gisoreux Gap"
                }
                else if (scenario === "Scenario6") {
                    scenarioTitle = "The Lonely Tower"

                    document.getElementById('SpcFtrPlayer1').classList.remove('d-none');
                    document.getElementById('SpcFtrPlayer2').classList.remove('d-none');
                }




                // Wyświetlanie danych na stronie
                document.getElementById("player1Display").textContent = player1Name;
                document.getElementById("player2Display").textContent = player2Name;
                document.getElementById("scenarioDisplay").textContent = "Scenario: " + scenarioTitle;

                const modal = document.getElementById("modalButton");
                modal.setAttribute("data-bs-target", `#${scenario}Modal`);

                document.getElementById("ptsNamePlayer1").textContent = player1Name + ": ";
                document.getElementById("ptsNamePlayer2").textContent = player2Name + ": ";
            };

            function addUnit(player) {
                const unitsDiv = document.getElementById(player + 'Units');
                const unitDiv = document.createElement('div');
                unitDiv.classList.add('row', 'mb-2'); // Dodanie klas Bootstrap dla wiersza

                // Tworzenie formularza dla jednostki
                unitDiv.innerHTML = `
                                                                    <div class="col-md-1 text-center">
                                                                        <button type="button" class="btn btn-link" onclick="removeUnit(this)"><i class="bi bi-trash3-fill" style="color: black;"></i></button>
                                                                    </div>
                                                                    <div class="col-md-5">
                                                                        <input type="text" class="form-control unit-name" placeholder="Unit name" required>
                                                                    </div>
                                                                    <div class="col-md-2">
                                                                        <input type="number" class="form-control unit-points" placeholder="Pts" required oninput="updatePoints()">
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <select class="form-select unit-state" onchange="updatePoints()">
                                                                            <option value="" hidden>Unit state</option>
                                                                            <option value="destroyed">Destroyed</option>
                                                                            <option value="fleeing">Fleeing</option>
                                                                            <option value="25%">25% Str</option>
                                                                            <option value="OK">Alive</option>
                                                                        </select>
                                                                    </div>
                                                                    <hr class="mt-3" />
                                                                `;

                unitsDiv.appendChild(unitDiv);
            }

            function updatePoints() {
                let player1TotalPoints = 0;
                let player2TotalPoints = 0;

                // Zliczanie punktów dla Gracza 1
                const player1Units = document.getElementById('player1Units').getElementsByClassName('row');
                for (let unit of player1Units) {
                    const pointsInput = unit.querySelector('.unit-points');
                    const stateSelect = unit.querySelector('.unit-state');

                    const points = parseInt(pointsInput.value) || 0;

                    if (stateSelect.value === 'destroyed') {
                        player1TotalPoints += points;
                    } else if (stateSelect.value === 'fleeing') {
                        player1TotalPoints += points * 0.5;
                    } else if (stateSelect.value === '25%') {
                        player1TotalPoints += points * 0.25;
                    } else if (stateSelect.value === 'OK') { }

                }

                const player1General = document.getElementById('GeneralSlainPlayer1');
                if (player1General.checked) {
                    player1TotalPoints += 100;
                }

                const player1Bsb = document.getElementById('BsbPlayer1');
                if (player1Bsb.checked) {
                    player1TotalPoints += 50;
                }


                const SpecialFeaturePlayer1 = document.getElementById('SpecialFeaturePlayer1');
                if (SpecialFeaturePlayer1.checked) {
                    player1TotalPoints += 200;
                }

                const StandardsPlayer1 = document.getElementById('StandardsPlayer1');
                const standardsPlayer1Value = parseInt(StandardsPlayer1.value) || 0;
                player1TotalPoints += standardsPlayer1Value * 50;


                // Zliczanie punktów dla Gracza 2
                const player2Units = document.getElementById('player2Units').getElementsByClassName('row');
                for (let unit of player2Units) {
                    const pointsInput = unit.querySelector('.unit-points');
                    const stateSelect = unit.querySelector('.unit-state');

                    const points = parseInt(pointsInput.value) || 0;

                    if (stateSelect.value === 'destroyed') {
                        player2TotalPoints += points;
                    } else if (stateSelect.value === 'fleeing') {
                        player2TotalPoints += points * 0.5;
                    } else if (stateSelect.value === '25%') {
                        player2TotalPoints += points * 0.25;
                    } else if (stateSelect.value === 'OK') { }
                }

                const player2General = document.getElementById('GeneralSlainPlayer2');
                if (player2General.checked) {
                    player2TotalPoints += 100;
                }

                const player2Bsb = document.getElementById('BsbPlayer2');
                if (player2Bsb.checked) {
                    player2TotalPoints += 50;
                }

                const SpecialFeaturePlayer2 = document.getElementById('SpecialFeaturePlayer2');
                if (SpecialFeaturePlayer2.checked) {
                    player2TotalPoints += 200;
                }

                const StandardsPlayer2 = document.getElementById('StandardsPlayer2');
                const standardsPlayer2Value = parseInt(StandardsPlayer2.value) || 0;
                player2TotalPoints += standardsPlayer2Value * 50;



                // Uaktualnienie punktów w UI
                document.getElementById('player1Points').innerText = player1TotalPoints.toString();
                document.getElementById('player2Points').innerText = player2TotalPoints.toString();


                const player1Name = localStorage.getItem("player1");
                const player2Name = localStorage.getItem("player2");
                // Uaktualnienie wyniku bitwy


                // Sprawdzamy, czy wybrano "Official"
                const countingType = document.getElementById('countingType').value;
                if (countingType === "Official") {

                    document.getElementById('BattlePointsDiv').classList.add('d-none');

                    if ((player1TotalPoints - player2TotalPoints) >= 100) {
                        document.getElementById('battleResult').innerText = player1Name + ' - VICTORY!';
                        if (player1TotalPoints >= 2 * player2TotalPoints) {
                            document.getElementById('battleResult').innerText = player1Name + ' - CRUSHING VICTORY!';
                        }
                    }
                    else if ((player2TotalPoints - player1TotalPoints) >= 100) {
                        document.getElementById('battleResult').innerText = player2Name + ' - VICTORY!';
                        if (player2TotalPoints >= 2 * player1TotalPoints) {
                            document.getElementById('battleResult').innerText = player2Name + ' - CRUSHING VICTORY!';
                        }
                    }
                    else {
                        document.getElementById('battleResult').innerText = 'Draw';
                    }
                }
                else if (countingType === "Tournament") {
                    document.getElementById('BattlePointsDiv').classList.remove('d-none');

                    let PointLimit = document.getElementById('BattlePoints').value


                    if (player1TotalPoints > player2TotalPoints) {

                        let substract1 = player1TotalPoints - player2TotalPoints

                        if (substract1 <= PointLimit * 0.1) {
                            document.getElementById('battleResult').innerText = player1Name + ' 10 : 10 ' + player2Name;
                        }
                        else if (substract1 > PointLimit * 0.1 && substract1 <= PointLimit * 0.2) {
                            document.getElementById('battleResult').innerText = player1Name + ' 11 : 9 ' + player2Name;
                        }
                        else if (substract1 > PointLimit * 0.2 && substract1 <= PointLimit * 0.3) {
                            document.getElementById('battleResult').innerText = player1Name + ' 12 : 8 ' + player2Name;
                        }
                        else if (substract1 > PointLimit * 0.3 && substract1 <= PointLimit * 0.4) {
                            document.getElementById('battleResult').innerText = player1Name + ' 13 : 7 ' + player2Name;
                        }
                        else if (substract1 > PointLimit * 0.4 && substract1 <= PointLimit * 0.5) {
                            document.getElementById('battleResult').innerText = player1Name + ' 14 : 6 ' + player2Name;
                        }
                        else if (substract1 > PointLimit * 0.5 && substract1 <= PointLimit * 0.6) {
                            document.getElementById('battleResult').innerText = player1Name + ' 15 : 5 ' + player2Name;
                        }
                        else if (substract1 > PointLimit * 0.6 && substract1 <= PointLimit * 0.7) {
                            document.getElementById('battleResult').innerText = player1Name + ' 16 : 4 ' + player2Name;
                        }
                        else if (substract1 > PointLimit * 0.7 && substract1 <= PointLimit * 0.8) {
                            document.getElementById('battleResult').innerText = player1Name + ' 17 : 3 ' + player2Name;
                        }
                        else if (substract1 > PointLimit * 0.8 && substract1 <= PointLimit * 0.9) {
                            document.getElementById('battleResult').innerText = player1Name + ' 18 : 2 ' + player2Name;
                        }
                        else if (substract1 > PointLimit * 0.9 && substract1 <= PointLimit) {
                            document.getElementById('battleResult').innerText = player1Name + ' 19 : 1 ' + player2Name;
                        }
                        else if (substract1 > PointLimit) {
                            document.getElementById('battleResult').innerText = player1Name + ' 20 : 0 ' + player2Name;
                        }
                    }
                    else if (player2TotalPoints > player1TotalPoints) {

                        let substract2 = player2TotalPoints - player1TotalPoints

                        if (substract2 <= PointLimit * 0.1) {
                            document.getElementById('battleResult').innerText = player1Name + ' 10 : 10 ' + player2Name;
                        }
                        else if (substract2 > PointLimit * 0.1 && substract2 <= PointLimit * 0.2) {
                            document.getElementById('battleResult').innerText = player1Name + ' 9 : 11 ' + player2Name;
                        }
                        else if (substract2 > PointLimit * 0.2 && substract2 <= PointLimit * 0.3) {
                            document.getElementById('battleResult').innerText = player1Name + ' 8 : 12 ' + player2Name;
                        }
                        else if (substract2 > PointLimit * 0.3 && substract2 <= PointLimit * 0.4) {
                            document.getElementById('battleResult').innerText = player1Name + ' 7 : 13 ' + player2Name;
                        }
                        else if (substract2 > PointLimit * 0.4 && substract2 <= PointLimit * 0.5) {
                            document.getElementById('battleResult').innerText = player1Name + ' 6 : 14 ' + player2Name;
                        }
                        else if (substract2 > PointLimit * 0.5 && substract2 <= PointLimit * 0.6) {
                            document.getElementById('battleResult').innerText = player1Name + ' 5 : 15 ' + player2Name;
                        }
                        else if (substract2 > PointLimit * 0.6 && substract2 <= PointLimit * 0.7) {
                            document.getElementById('battleResult').innerText = player1Name + ' 4 : 16 ' + player2Name;
                        }
                        else if (substract2 > PointLimit * 0.7 && substract2 <= PointLimit * 0.8) {
                            document.getElementById('battleResult').innerText = player1Name + ' 3 : 17 ' + player2Name;
                        }
                        else if (substract2 > PointLimit * 0.8 && substract2 <= PointLimit * 0.9) {
                            document.getElementById('battleResult').innerText = player1Name + ' 2 : 18 ' + player2Name;
                        }
                        else if (substract2 > PointLimit * 0.9 && substract2 <= PointLimit) {
                            document.getElementById('battleResult').innerText = player1Name + ' 1 : 19 ' + player2Name;
                        }
                        else if (substract2 > PointLimit) {
                            document.getElementById('battleResult').innerText = player1Name + ' 0 : 20 ' + player2Name;
                        }
                    }
                    else {
                        document.getElementById('battleResult').innerText = player1Name + ' 10 : 10 ' + player2Name;
                    }


                }

            }


            function removeUnit(button) {
                // Usuwanie jednostki
                const unitDiv = button.closest('.row'); // Znajduje rodzica, czyli div z klasą row
                unitDiv.remove(); // Usuwa element
                updatePoints(); // Uaktualnij punkty po usunięciu jednostki
            }
        </script>

        <!-- Importowanie skryptów Bootstrap -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    </body>
</html>